<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Image Compressor — Optimize & Download | Fast, Responsive</title>
  <meta name="description" content="Free responsive image compression tool. Choose quality, resize, and download optimized JPEG/WEBP/PNG images. Adsense-ready ad slots included.">
  <meta name="keywords" content="image compressor, image optimizer, compress images, webp converter, resize image, image quality">
  <meta name="robots" content="index, follow">

  <!-- Open Graph / Social -->
  <meta property="og:title" content="Image Compressor — Optimize & Download">
  <meta property="og:description" content="Compress and optimize images in the browser. Choose quality, resize, and download — supports JPEG, WEBP, PNG.">
  <meta property="og:type" content="website">

  <!-- Structured data (JSON-LD) -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebApplication",
    "name": "Image Compressor",
    "url": "https://yourdomain.example/",
    "description": "Client-side image compression and optimization tool.",
    "applicationCategory": "Image Processing",
    "operatingSystem": "All",
    "creator": {"@type":"Organization","name":"YourName or Company"}
  }
  </script>

  <!-- Styles: simple responsive layout -->
  <style>
    :root{--accent:#0b84ff;--muted:#666}
    *{box-sizing:border-box}
    body{font-family:Inter, system-ui, -apple-system, Roboto, 'Helvetica Neue', Arial; margin:0; color:#111; background:linear-gradient(180deg,#fafafa,#fff);}
    header{padding:18px 20px;display:flex;align-items:center;justify-content:space-between;gap:12px}
    .brand{display:flex;align-items:center;gap:12px}
    .logo{height:44px;width:44px;border-radius:8px;background:var(--accent);display:flex;align-items:center;justify-content:center;color:#fff;font-weight:700}
    main{display:grid;grid-template-columns:1fr 320px;gap:20px;padding:20px;max-width:1200px;margin:0 auto}
    @media (max-width:900px){main{grid-template-columns:1fr;padding:14px} .aside{order:2}}
    .card{background:#fff;border-radius:12px;box-shadow:0 6px 18px rgba(10,20,40,0.06);padding:18px}
    h1{margin:0;font-size:20px}
    p.lead{color:var(--muted);margin:8px 0 16px}

    /* drop area */
    .drop{border:2px dashed #e6e9ef;border-radius:10px;padding:22px;text-align:center;cursor:pointer;transition:all .15s}
    .drop.drag{background:rgba(11,132,255,0.03);border-color:var(--accent)}
    .controls{display:flex;gap:12px;flex-wrap:wrap;margin-top:12px}
    .control{flex:1;min-width:120px}
    label{display:block;font-size:13px;margin-bottom:6px;color:#333}
    input[type=range]{width:100%}
    select,input[type=number]{width:100%;padding:8px;border-radius:8px;border:1px solid #e6e9ef}
    button.primary{background:var(--accent);color:#fff;padding:10px 14px;border-radius:10px;border:0;cursor:pointer}
    .small{font-size:13px;color:var(--muted)}

    /* results */
    .results{display:grid;grid-template-columns:repeat(auto-fit,minmax(160px,1fr));gap:12px;margin-top:14px}
    .thumb{background:#fbfbff;border-radius:8px;padding:10px;display:flex;flex-direction:column;gap:8px;align-items:center}
    .thumb img{max-width:100%;height:120px;object-fit:contain;border-radius:6px}
    .meta{font-size:13px;color:var(--muted);text-align:center}
    .download{width:100%;padding:8px;border-radius:8px;border:1px solid #e6e9ef;background:#fff;cursor:pointer}

    /* aside */
    .aside .card{position:sticky;top:20px}
    footer{padding:18px;text-align:center;color:var(--muted);font-size:13px}

    /* ad placeholders */
    .ad-slot{display:block;background:#f5f7fa;border:1px dashed #dfe6f2;padding:12px;border-radius:8px;text-align:center;color:#0a63d6}
    .muted-small{font-size:12px;color:#8b96a8}
  </style>

  <!-- Optional JSZip for zipping multiple downloads -->
  <script src="https://cdn.jsdelivr.net/npm/jszip@3.10.1/dist/jszip.min.js"></script>
</head>
<body>
  <header>
    <div class="brand">
      <div class="logo">IC</div>
      <div>
        <h1>Image Compressor</h1>
        <div class="muted-small">Fast client-side image optimization — no upload needed</div>
      </div>
    </div>
    <!-- Header ad slot (replace CLIENT_ID and AD_SLOT below) -->
    <div style="min-width:320px;max-width:468px">
      <!-- Google AdSense header banner placeholder -->
      <!-- Replace ca-pub-REPLACE_WITH_CLIENT with your publisher id and REPLACE_WITH_SLOT with your ad unit -->
      <div class="ad-slot card" aria-hidden="true">Header Ad — insert AdSense script & ad unit here</div>
    </div>
  </header>

  <main>
    <section>
      <div class="card">
        <h2>Compress & Optimize Images</h2>
        <p class="lead">Drag & drop or select one or multiple images (JPEG, PNG, WebP). Pick compression quality and optional resize. All processing happens in your browser.</p>

        <div id="drop" class="drop" tabindex="0">
          <strong>Drop images here</strong>
          <div class="small">or <button id="selectBtn" class="primary" style="display:inline-block;padding:6px 8px">Select Files</button></div>
          <input id="fileInput" type="file" accept="image/*" multiple style="display:none">
        </div>

        <div class="controls" style="margin-top:16px">
          <div class="control">
            <label for="quality">Compression quality: <span id="qualityVal">85</span>%</label>
            <input id="quality" type="range" min="10" max="100" value="85">
          </div>

          <div class="control">
            <label for="format">Output format</label>
            <select id="format">
              <option value="image/jpeg">JPEG (good compatibility)</option>
              <option value="image/webp">WEBP (best compression)</option>
              <option value="image/png">PNG (lossless; quality param ignored)</option>
            </select>
          </div>

          <div class="control">
            <label for="maxWidth">Max width (px) — 0 = keep original</label>
            <input id="maxWidth" type="number" min="0" value="0">
          </div>

          <div style="display:flex;align-items:flex-end;gap:8px">
            <button id="compressBtn" class="primary">Compress</button>
            <button id="downloadAll" class="download">Download All (zip)</button>
          </div>
        </div>

        <div id="results" class="results" aria-live="polite"></div>
      </div>

      <!-- Inline ad inside content -->
      <div style="margin-top:12px" class="card">
        <div class="ad-slot">Content Ad — insert AdSense ad unit here</div>
      </div>

    </section>

    <aside class="aside">
      <div class="card">
        <h3>Tool Info</h3>
        <p class="small">This tool runs completely in your browser. Images are NOT uploaded to any server. Use the quality slider and output format to tune size vs visual quality.</p>
        <ul>
          <li class="small">JPEG/WEBP respect the quality setting (10–100).</li>
          <li class="small">PNG is lossless — quality param will be ignored by most browsers.</li>
          <li class="small">For best web performance, prefer WEBP (smaller files).</li>
        </ul>

        <hr>
        <h4>Monetization</h4>
        <p class="small">Replace placeholders below with your AdSense client & ad-slot IDs. Example script (put in &lt;head&gt;):</p>
        <pre class="small" style="white-space:pre-wrap;background:#f6f8fc;padding:8px;border-radius:6px">&lt;script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-REPLACE_WITH_CLIENT" crossorigin="anonymous"&gt;&lt;/script&gt;</pre>
        <p class="small">Then place ad units where the ad-slot placeholders are shown. Example ad unit markup:</p>
        <pre class="small" style="white-space:pre-wrap;background:#f6f8fc;padding:8px;border-radius:6px">&lt;ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-REPLACE_WITH_CLIENT" data-ad-slot="REPLACE_WITH_SLOT" data-ad-format="auto"&gt;&lt;/ins&gt;&lt;script&gt;(adsbygoogle = window.adsbygoogle || []).push({});&lt;/script&gt;</pre>

        <hr>
        <h4>SEO tips</h4>
        <ol class="small">
          <li>Use descriptive filenames and alt attributes when publishing images.</li>
          <li>Serve images in modern formats (WebP) for speed and SEO.</li>
          <li>Only compress to the point visual quality is acceptable for your audience.</li>
        </ol>
      </div>

      <div style="margin-top:12px" class="card">
        <div class="ad-slot">Sidebar Ad — insert AdSense ad unit here</div>
      </div>
    </aside>
  </main>

  <footer>
    <div class="small">Built with ❤️ — Client-side image compressor. No uploads by default. Copyright © <span id="year"></span></div>
  </footer>

<script>
  // set year
  document.getElementById('year').textContent = new Date().getFullYear();

  // UI refs
  const drop = document.getElementById('drop');
  const fileInput = document.getElementById('fileInput');
  const selectBtn = document.getElementById('selectBtn');
  const quality = document.getElementById('quality');
  const qualityVal = document.getElementById('qualityVal');
  const format = document.getElementById('format');
  const maxWidth = document.getElementById('maxWidth');
  const compressBtn = document.getElementById('compressBtn');
  const results = document.getElementById('results');
  const downloadAll = document.getElementById('downloadAll');

  let files = [];
  quality.addEventListener('input', ()=> qualityVal.textContent = quality.value);

  selectBtn.addEventListener('click', ()=> fileInput.click());
  fileInput.addEventListener('change', (e)=> handleFiles(e.target.files));

  // drag & drop
  ['dragenter','dragover'].forEach(ev=> drop.addEventListener(ev,(e)=>{e.preventDefault();drop.classList.add('drag')}));
  ['dragleave','drop'].forEach(ev=> drop.addEventListener(ev,(e)=>{e.preventDefault();drop.classList.remove('drag')}));
  drop.addEventListener('drop', (e)=> handleFiles(e.dataTransfer.files));
  drop.addEventListener('keydown', (e)=>{ if(e.key==='Enter' || e.key===' ') fileInput.click(); });

  function handleFiles(fileList){
    const arr = Array.from(fileList).filter(f=>f.type.startsWith('image/'));
    if(!arr.length) return alert('No image files found');
    files = files.concat(arr);
    renderThumbnails();
  }

  function renderThumbnails(){
    results.innerHTML = '';
    files.forEach((file, i)=>{
      const el = document.createElement('div'); el.className='thumb card';
      const img = document.createElement('img');
      img.alt = file.name;
      const reader = new FileReader();
      reader.onload = (ev)=> img.src = ev.target.result;
      reader.readAsDataURL(file);
      const meta = document.createElement('div'); meta.className='meta'; meta.textContent = `${file.name} — ${(file.size/1024).toFixed(1)} KB`;
      const remove = document.createElement('button'); remove.className='download'; remove.textContent='Remove'; remove.addEventListener('click', ()=>{files.splice(i,1);renderThumbnails()});
      el.append(img, meta, remove);
      results.appendChild(el);
    });
  }

  // compression core
  async function compressImage(file, outputType, qualityNum, maxW){
    // load image
    const img = await loadImageFromFile(file);
    const [w,h] = [img.naturalWidth, img.naturalHeight];
    let targetW = w;
    let targetH = h;
    if(maxW && maxW>0 && w>maxW){
      targetW = maxW;
      targetH = Math.round((h * maxW) / w);
    }
    // canvas
    const canvas = document.createElement('canvas');
    canvas.width = targetW; canvas.height = targetH;
    const ctx = canvas.getContext('2d');
    ctx.drawImage(img,0,0,targetW,targetH);

    // blob
    // Note: quality param is used for image/jpeg and image/webp in most browsers
    const blob = await new Promise(resolve => {
      // for PNG quality is ignored by toBlob in browsers
      canvas.toBlob(resolve, outputType, qualityNum / 100);
    });

    // fallback if toBlob returned null
    if(!blob) throw new Error('Compression failed');
    return new File([blob], makeFileName(file.name, outputType), {type: blob.type});
  }

  function makeFileName(origName, mime){
    const dot = origName.lastIndexOf('.');
    const base = dot>0?origName.slice(0,dot):origName;
    const ext = mime === 'image/webp' ? 'webp' : (mime==='image/png' ? 'png' : 'jpg');
    return base + '-compressed.' + ext;
  }

  function loadImageFromFile(file){
    return new Promise((resolve, reject)=>{
      const url = URL.createObjectURL(file);
      const img = new Image();
      img.onload = ()=>{URL.revokeObjectURL(url);resolve(img)};
      img.onerror = (e)=>{URL.revokeObjectURL(url);reject(e)};
      img.src = url;
    });
  }

  compressBtn.addEventListener('click', async ()=>{
    if(!files.length) return alert('Please add images first');
    compressBtn.disabled = true; compressBtn.textContent = 'Compressing...';
    const outputType = format.value;
    const q = parseInt(quality.value,10);
    const mw = parseInt(maxWidth.value,10) || 0;

    const compressedFiles = [];
    for(let i=0;i<files.length;i++){
      try{
        const out = await compressImage(files[i], outputType, q, mw);
        compressedFiles.push(out);
      }catch(err){console.error('compress fail',err)}
    }

    // show compressed results
    results.innerHTML = '';
    compressedFiles.forEach((f)=>{
      const el = document.createElement('div'); el.className='thumb card';
      const img = document.createElement('img'); img.alt = f.name;
      const reader = new FileReader();
      reader.onload = (ev)=> img.src = ev.target.result;
      reader.readAsDataURL(f);
      const meta = document.createElement('div'); meta.className='meta'; meta.textContent = `${f.name} — ${(f.size/1024).toFixed(1)} KB`;
      const a = document.createElement('a'); a.className='download'; a.href = URL.createObjectURL(f); a.download = f.name; a.textContent='Download';
      el.append(img, meta, a);
      results.appendChild(el);
    });

    // replace files with compressed files for potential further operations
    files = compressedFiles;
    compressBtn.disabled = false; compressBtn.textContent = 'Compress';
  });

  // zip download
  downloadAll.addEventListener('click', async ()=>{
    if(!files.length) return alert('No files to download');
    const zip = new JSZip();
    for(const f of files){
      const data = await f.arrayBuffer();
      zip.file(f.name, data);
    }
    const blob = await zip.generateAsync({type:'blob'});
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a'); a.href = url; a.download = 'images-compressed.zip'; a.click();
    URL.revokeObjectURL(url);
  });

  // accessibility: handle paste (image from clipboard)
  window.addEventListener('paste',(e)=>{
    const items = (e.clipboardData || e.originalEvent.clipboardData).items;
    const images = [];
    for(const it of items){ if(it.kind === 'file' && it.type.startsWith('image/')) images.push(it.getAsFile()); }
    if(images.length) handleFiles(images);
  });

  // friendly progressive enhancement note
  if(!window.FileReader || !document.createElement('canvas').toBlob){
    alert('Your browser may not fully support client-side image compression. For best results use the latest Chrome, Edge, or Firefox.');
  }
</script>
</body>
</html>
